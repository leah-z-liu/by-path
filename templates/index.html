{% extends "base.html" %}

{% block javascript %}
<!-- Link mapbox draw js and css -->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.0/mapbox-gl-draw.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.0/mapbox-gl-draw.css" type="text/css"/>
<!-- Link to mapbox geocoder plugin -->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.3.0/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.3.0/mapbox-gl-geocoder.css" type="text/css" />
{% endblock %}

{% block menu %}

<div class="modal fade" id="modalForm1" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content modal-background1">
        <div class="modal-header text-center">
          <h4 class="modal-title w-100 font-weight-bold">Register</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body mx-3">
          <form method="post" action="/register" class="needs-validation" name="register_form">
            <div class="md-form mb-5">
                <i class="fas fa-user prefix grey-text"></i>
                <label for="regForm-name">Name</label>
                <input type="text" id="regForm-name" class="form-control" name="username" required>
            </div>
            <div class="md-form mb-5">
                <i class="fas fa-envelope prefix grey-text"></i>
                <label data-error="wrong" data-success="right" for="regForm-email">Email</label>
                <input type="email" id="regForm-email" class="form-control validate" name="email" required>
            </div>
            <div class="md-form mb-4">
                <i class="fas fa-lock prefix grey-text"></i>
                <label data-error="wrong" data-success="right" for="regForm-pass">Password</label>
                <input type="password" id="regForm-pass" class="form-control validate" name="password" required> 
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button type="submit" class="btn btn-deep-orange">Sign up</button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="modalForm2" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content modal-backgroud2" style="background-image: url(/static/img/modalform2.jpg);background-size: cover;color: whitesmoke;">
          <div class="modal-header text-center">
            <h4 class="modal-title w-100 font-weight-bold">Log In</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body mx-3">
            <form method="get" action="/login" name="login_form">
              <div class="md-form mb-5">
                  <i class="fas fa-envelope prefix grey-text"></i>
                  <label data-error="wrong" data-success="right" for="loginForm-email">Email</label>
                  <input type="email" id="loginForm-email" class="form-control validate" name="emailLogin" required>
              </div>
              <div class="md-form mb-4">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <label data-error="wrong" data-success="right" for="loginForm-pass">Password</label>
                  <input type="password" id="loginForm-pass" class="form-control validate" name="passwordLogin" required>
              </div>
              <div class="modal-footer d-flex justify-content-center">
                  <button type="submit" class="btn">Login</button>
              </div>
            </form>
          </div>
      </div>
        
    </div>
    
</div>
{% endblock %}

{% block navlinks %}
{% if current_user.is_authenticated %}
<li class="nav-item">
<a class="nav-link" href="/user">Favorite Route</a>
</li>
<li class="nav-item">   
<a class="nav-link" href="/logout">Log Out</a>
</li>
{% else %}
<li class="nav-item">
<a class="nav-link" href="" data-toggle="modal" data-target="#modalForm1">Register</a>
</li>
<li class="nav-item">   
<a class="nav-link" href="" data-toggle="modal" data-target="#modalForm2">Log In</a>
</li>
{% endif %}
{% endblock %}

{% block mapcontent %}
<div id="map"></div>
<div class="toggle_wrapper">
    <div class="collapse dont-collapse-sm" id="hourCollapse">
        <div class="toggle_radio" data-toggle="tooltip" title="Choose to see how safe your route is within the hour.">
        <input type="radio" value="1" class="toggle_option" id="hour1" name="toggle_option">
        <input type="radio" value="2" class="toggle_option" id="hour2" name="toggle_option">
        <input type="radio" value="3" class="toggle_option" id="hour3" name="toggle_option">
        <input type="radio" value="4" class="toggle_option" id="hour4" name="toggle_option">
        <input type="radio" value="5" class="toggle_option" id="hour5" name="toggle_option">
        <input type="radio" value="6" class="toggle_option" id="hour6" name="toggle_option">
        <input type="radio" value="7" class="toggle_option" id="hour7" name="toggle_option">
        <input type="radio" value="8" class="toggle_option" id="hour8" name="toggle_option">
        <input type="radio" value="9" class="toggle_option" id="hour9" name="toggle_option">
        <input type="radio" value="10" class="toggle_option" id="hour10" name="toggle_option">
        <input type="radio" value="11" class="toggle_option" id="hour11" name="toggle_option">
        <input type="radio" value="12" class="toggle_option" id="hour12" name="toggle_option">
        <label for="hour1"><p>1:00</p></label>
        <label for="hour2"><p>2:00</p></label>
        <label for="hour3"><p>3:00</p></label>
        <label for="hour4"><p>4:00</p></label>
        <label for="hour5"><p>5:00</p></label>
        <label for="hour6"><p>6:00</p></label>
        <label for="hour7"><p>7:00</p></label>
        <label for="hour8"><p>8:00</p></label>
        <label for="hour9"><p>9:00</p></label>
        <label for="hour10"><p>10:00</p></label>
        <label for="hour11"><p>11:00</p></label>
        <label for="hour12"><p>12:00</p></label>
        <div class="toggle_option_slider"></div>
        </div>
    </div>
</div>
<div class="ampm_wrapper">
        <div class="toggle_ampm">
          <input type="radio" value="am" class="toggle_option" id="am" name="ampm">
          <input type="radio" value="pm" class="toggle_option" id="pm" name="ampm">
          <label for="am"><p>AM</p></label>
          <label for="pm"><p>PM</p></label>
          <div class="ampm_slider"></div>
        </div>
</div>

{% if current_user.is_authenticated and not current_user.routes %}
<div class="modal fade" id="routeModal" tabindex="-1" role="dialog" aria-labelledby="routeModalLabel" aria-hidden="true">
  <div class="modal-dialog" id="routeDialog" role="document">
    <div class="modal-content">
      <button type="button" id="saveroute" class="btn">Save As Favorite</button>
    </div>
  </div>
</div>
{% endif %}
<div class="info-box">  
    <div id="distance"></div>
    <div id="duration"></div>
    <div id="violent-crime-count"></div>
</div>
  
<div class="control-panel">
  <div class="buttons">
    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Click to use current location">
        <button class="btn" id="get-location"><i class="fas fa-street-view"></i></button>
    </span>
    <button class="btn" id="get-start">Choose start</button> <br>
    <button class="btn toggle" id="get-direction">Go</button> <br>
    <button class="btn toggle" id="clear-route">Clear</button> <br>
    <button class="btn toggle" id="get-alt">Find safer route</button>
  </div>
</div>

<div class="navigation"></div>

<div id='hiddenInfo'></div>

{% endblock %}

{% block script %}
<script type='text/javascript' src="/static/script.js"></script>
{% endblock%}